<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firm Profile - LSCA</title>
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <style>
        :root {
            --lsca-green: #4CAF50;
            --lsca-green-dark: #2D3E2F;
            --lsca-green-light: #E8F5E9;
            --grade-a: #22c55e;
            --grade-b: #84cc16;
            --grade-c: #eab308;
            --grade-d: #f97316;
            --grade-f: #ef4444;
            --fossil-fuel: #ef4444;
            --renewable: #22c55e;
            --text-dark: #1f2937;
            --text-muted: #6b7280;
            --border: #e5e7eb;
            --bg-light: #f9fafb;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Source Sans Pro', -apple-system, BlinkMacSystemFont, sans-serif;
            color: var(--text-dark);
            background: #fff;
            line-height: 1.6;
        }

        .site-header {
            background: #fff;
            border-bottom: 1px solid var(--border);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo { height: 50px; }

        .nav-links { display: flex; gap: 2rem; }

        .nav-links a {
            color: var(--lsca-green-dark);
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .nav-links a:hover { color: var(--lsca-green); }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--lsca-green);
            text-decoration: none;
            font-weight: 600;
            padding: 1rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .back-link:hover { text-decoration: underline; }

        .profile-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem 4rem;
        }

        /* Loading State */
        .loading-state {
            text-align: center;
            padding: 4rem 2rem;
            color: var(--text-muted);
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--border);
            border-top-color: var(--lsca-green);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .profile-header {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 2rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid var(--border);
        }

        .firm-name {
            font-size: 2rem;
            color: var(--lsca-green-dark);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .vault-rank {
            font-size: 0.9rem;
            color: var(--text-muted);
            font-weight: 400;
        }

        .grade-display {
            display: flex;
            align-items: flex-end;
            gap: 2rem;
            margin-top: 1rem;
        }

        .main-grade {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .main-grade-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-muted);
            margin-bottom: 0.25rem;
        }

        .main-grade-value {
            font-size: 5rem;
            font-weight: 700;
            line-height: 1;
            border-radius: 12px;
            padding: 0.25rem 1rem;
            color: #fff;
        }

        .sub-grades { display: flex; gap: 1rem; }

        .sub-grade {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0.75rem 1rem;
            background: var(--bg-light);
            border-radius: 8px;
            min-width: 80px;
        }

        .sub-grade-label {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-muted);
            margin-bottom: 0.25rem;
        }

        .sub-grade-value {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .quote-intro {
            font-size: 1.25rem;
            font-style: italic;
            color: var(--lsca-green-dark);
            border-left: 4px solid var(--lsca-green);
            padding-left: 1rem;
            margin-top: 1rem;
        }

        .profile-sidebar {
            background: var(--bg-light);
            border-radius: 12px;
            padding: 1.5rem;
        }

        .sidebar-title {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-muted);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border);
        }

        .sidebar-item {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--border);
        }

        .sidebar-item:last-child { border-bottom: none; }

        .sidebar-label { color: var(--text-muted); font-size: 0.9rem; }
        .sidebar-value { font-weight: 600; }

        .engagement-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 100px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .engagement-badge.submitted { background: #dcfce7; color: #166534; }
        .engagement-badge.no-response { background: #fef3c7; color: #92400e; }

        .activity-flag {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
        }

        .activity-flag.positive { background: #dcfce7; border: 1px solid #86efac; }
        .activity-flag.negative { background: #fee2e2; border: 1px solid #fca5a5; }

        .activity-icon { font-size: 1.5rem; }
        .activity-text { font-weight: 600; }
        .activity-flag.positive .activity-text { color: #166534; }
        .activity-flag.negative .activity-text { color: #991b1b; }

        .section-title {
            font-size: 1.25rem;
            color: var(--lsca-green-dark);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .section-title::before {
            content: '';
            width: 4px;
            height: 24px;
            background: var(--lsca-green);
            border-radius: 2px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .stat-card {
            background: var(--bg-light);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid var(--border);
        }

        .stat-card-title {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-muted);
            margin-bottom: 1rem;
        }

        .stat-comparison { display: flex; gap: 1rem; }
        .stat-item { flex: 1; }
        .stat-label { font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.25rem; }
        .stat-value { font-size: 1.5rem; font-weight: 700; }
        .stat-value.fossil { color: var(--fossil-fuel); }
        .stat-value.renewable { color: var(--renewable); }
        .stat-subtext { font-size: 0.8rem; color: var(--text-muted); }

        .content-section {
            margin: 2rem 0;
            padding: 1.5rem;
            background: var(--bg-light);
            border-radius: 12px;
        }

        .content-section p { margin-bottom: 1rem; }
        .content-section p:last-child { margin-bottom: 0; }

        .student-guidance {
            background: linear-gradient(135deg, var(--lsca-green-light) 0%, #fff 100%);
            border: 2px solid var(--lsca-green);
        }

        .guidance-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: var(--lsca-green-dark);
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 1rem;
        }

        .guidance-icon { font-size: 1.5rem; }

        .site-footer {
            background: var(--lsca-green-dark);
            color: #fff;
            padding: 3rem 2rem;
            text-align: center;
        }

        .footer-logo {
            height: 40px;
            filter: brightness(0) invert(1);
            margin-bottom: 1rem;
        }

        .footer-text { font-size: 0.9rem; opacity: 0.8; }

        .not-found {
            text-align: center;
            padding: 4rem 2rem;
        }

        .not-found h1 { color: var(--lsca-green-dark); margin-bottom: 1rem; }

        .data-pending {
            color: var(--text-muted);
            font-style: italic;
            padding: 1rem;
            background: var(--bg-light);
            border-radius: 8px;
            text-align: center;
        }

        @media (max-width: 768px) {
            .profile-header { grid-template-columns: 1fr; }
            .grade-display { flex-direction: column; align-items: flex-start; }
        }
    </style>
</head>
<body>
    <header class="site-header">
        <div class="header-content">
            <img src="https://images.squarespace-cdn.com/content/v1/646e3b899493ae261720e957/c97bb057-7d9d-4a29-b019-9dd824be333c/logo.png" alt="Law Students for Climate Accountability" class="logo">
            <nav class="nav-links">
                <a href="https://ls4ca.org/scorecard">Scorecard</a>
                <a href="/">Profiles</a>
                <a href="https://ls4ca.org/take-action">Take Action</a>
                <a href="https://ls4ca.org/about">About</a>
            </nav>
        </div>
    </header>

    <a href="/lsca-profiles/" class="back-link">‚Üê Back to All Firms</a>

    <div class="profile-container" id="profileContainer">
        <div class="loading-state" id="loadingState">
            <div class="loading-spinner"></div>
            <p>Loading firm profile...</p>
        </div>
    </div>

    <footer class="site-footer">
        <img src="https://images.squarespace-cdn.com/content/v1/646e3b899493ae261720e957/90bf33a1-f881-4bde-b7eb-3cb81575ece0/white+logo.png" alt="LSCA" class="footer-logo">
        <p class="footer-text">Law Students for Climate Accountability is a fiscally sponsored project of Earth Island Institute, a 501(c)(3) nonprofit organization.</p>
    </footer>

    <script>
        // Google Sheets CSV URL
        const SHEET_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSWOJ6eD5ufutrYKS7oiy09dqDdRJCKoxkOioTK7OSWWBWmMdpMlGjnjbuzrkNatA/pub?gid=1883963685&single=true&output=csv';

        const gradeColors = {
            'A': 'var(--grade-a)',
            'B': 'var(--grade-b)',
            'C': 'var(--grade-c)',
            'D': 'var(--grade-d)',
            'F': 'var(--grade-f)'
        };

        function getSlugFromURL() {
            const path = window.location.pathname;
            // Remove /lsca-profiles/ prefix for GitHub Pages
            const slug = path.replace(/^\/lsca-profiles\/?/, '').replace(/\.html$/, '').replace(/\/$/, '');
            return slug;
        }

        

        function formatCurrency(value) {
            if (!value || value === '0' || value === 0) return '$0';
            const num = parseFloat(value);
            if (isNaN(num)) return value;
            if (num >= 1e9) return '$' + (num / 1e9).toFixed(1) + 'B';
            if (num >= 1e6) return '$' + (num / 1e6).toFixed(1) + 'M';
            if (num >= 1e3) return '$' + (num / 1e3).toFixed(0) + 'K';
            return '$' + num.toFixed(0);
        }

        function parseRow(row) {
            if (!row['Firm Name'] || !row['Firm Slug']) return null;
            if (row['Vault Rank'] === 'Number (auto-filled)') return null;

            return {
                slug: row['Firm Slug'] || '',
                name: row['Firm Name'] || '',
                rank: parseInt(row['Vault Rank']) || 0,
                logo: row['Firm Logo'] || null,
                grade: row['Overall Grade'] || '',
                transaction: row['Transaction Grade'] || '',
                litigation: row['Litigation Grade'] || '',
                lobbying: row['Lobbying Grade'] || '',
                priorGrade: row['Prior Year Grade (2024)'] || '',
                transactionRank: parseInt(row['Transaction Rank']) || 0,
                transactionRankDesc: row['Transaction Rank Descriptor'] || '',
                litigationRank: parseInt(row['Litigation Rank']) || 0,
                litigationRankDesc: row['Litigation Rank Descriptor'] || '',
                ffTransactionValue: row['FF Transaction Value'] || '0',
                ffTransactionCount: parseInt(row['FF Transaction Count']) || 0,
                renewableTransactionValue: row['Renewable Transaction Value'] || '0',
                renewableTransactionCount: parseInt(row['Renewable Transaction Count']) || 0,
                exacerbatingPoints: parseInt(row['Exacerbating Points']) || 0,
                exacerbatingCount: parseInt(row['Exacerbating Case Count']) || 0,
                mitigatingPoints: parseInt(row['Mitigating Points']) || 0,
                mitigatingCount: parseInt(row['Mitigating Case Count']) || 0,
                new2024Exacerbating: parseInt(row['New 2024 Exacerbating']) || 0,
                new2024Mitigating: parseInt(row['New 2024 Mitigating']) || 0,
                ffLobbyingValue: row['FF Lobbying Compensation'] || '0',
                ffLobbyingCount: parseInt(row['FF Lobbying Client Count']) || 0,
                renewableLobbyingValue: row['Renewable Lobbying Comp'] || '0',
                renewableLobbyingCount: parseInt(row['Renewable Lobbying Clients']) || 0,
                engagementStatus: row['Engagement Status'] || 'No Response',
                firmStatement: row['Firm Statement Text'] || null,
                statementAuthor: row['Statement Author Name'] || '',
                statementTitle: row['Statement Author Title'] || '',
                takeaway: row['Takeaway Line'] || '',
                ratioNote: row['Ratio Note'] || '',
                analysis: row['LSCA Analysis'] || '',
                guidance: row['Guidance Summary'] || '',
                guidanceBottomLine: row['Guidance Bottom Line'] || '',
                interviewQ1: row['Interview Question 1'] || '',
                interviewQ2: row['Interview Question 2'] || '',
                interviewQ3: row['Interview Question 3'] || '',
                interviewQ4: row['Interview Question 4'] || ''
            };
        }

        async function loadFirmData() {
            const slug = getSlugFromURL();
            
            if (!slug) {
                window.location.href = '/lsca-profiles/';
                return;
            }

            try {
                const response = await fetch(SHEET_URL);
                const csvText = await response.text();
                
                Papa.parse(csvText, {
                    header: true,
                    skipEmptyLines: true,
                    complete: function(results) {
                        const firms = results.data
                            .map(parseRow)
                            .filter(firm => firm !== null);
                        
                        const firm = firms.find(f => f.slug === slug);
                        
                        if (firm) {
                            renderProfile(firm);
                        } else {
                            renderNotFound(slug);
                        }
                    },
                    error: function(error) {
                        console.error('CSV parse error:', error);
                        renderError();
                    }
                });
            } catch (error) {
                console.error('Fetch error:', error);
                renderError();
            }
        }

        function renderError() {
            const container = document.getElementById('profileContainer');
            container.innerHTML = `
                <div class="not-found">
                    <h1>Error Loading Profile</h1>
                    <p>There was an error loading the firm data. Please refresh the page or try again later.</p>
                    <p><a href="/" style="color: var(--lsca-green);">‚Üê Back to all firms</a></p>
                </div>
            `;
        }

        function renderProfile(firm) {
            const container = document.getElementById('profileContainer');
            document.title = `${firm.name} - LSCA Climate Profile`;

            const gradeColor = gradeColors[firm.grade] || 'var(--text-muted)';
            const transactionColor = gradeColors[firm.transaction] || 'var(--text-muted)';
            const litigationColor = gradeColors[firm.litigation] || 'var(--text-muted)';
            const lobbyingColor = gradeColors[firm.lobbying] || 'var(--text-muted)';
            const priorGradeColor = gradeColors[firm.priorGrade] || 'var(--text-muted)';

            // Activity flag
            let activityFlag = '';
            if (firm.new2024Exacerbating === 0) {
                activityFlag = `<div class="activity-flag positive"><span class="activity-icon">‚úì</span><span class="activity-text">No new fossil fuel litigation in 2024</span></div>`;
            } else if (firm.new2024Exacerbating > 0) {
                activityFlag = `<div class="activity-flag negative"><span class="activity-icon">‚ö†</span><span class="activity-text">Took on ${firm.new2024Exacerbating} new fossil fuel case${firm.new2024Exacerbating > 1 ? 's' : ''} in 2024</span></div>`;
            }

            // Firm statement section
            let firmStatementSection;
            if (firm.firmStatement) {
                const authorLine = firm.statementAuthor 
                    ? `<p style="font-size: 0.9rem; color: var(--text-muted); margin-top: 1rem; font-style: normal;">‚Äî ${firm.statementAuthor}${firm.statementTitle ? ', ' + firm.statementTitle : ''}</p>`
                    : '';
                firmStatementSection = `
                    <blockquote style="border-left: 4px solid var(--lsca-green); padding-left: 1.5rem; font-style: italic;">
                        <p>${firm.firmStatement}</p>
                        ${authorLine}
                    </blockquote>`;
            } else {
                firmStatementSection = `<p class="data-pending">${firm.name} has not submitted a statement to LSCA. We've reached out and await their response.</p>`;
            }

            // Grade trajectory
            let trajectoryArrow = '‚Üí';
            let trajectoryClass = '';
            if (firm.priorGrade && firm.grade !== firm.priorGrade) {
                if (firm.grade < firm.priorGrade) {
                    trajectoryArrow = '‚Üë';
                    trajectoryClass = 'style="color: var(--grade-a)"';
                } else {
                    trajectoryArrow = '‚Üì';
                    trajectoryClass = 'style="color: var(--grade-f)"';
                }
            }

            // Guidance icon
            const guidanceIcon = ['A', 'B'].includes(firm.grade) ? 'üí°' : '‚ö†Ô∏è';

            // Analysis section
            let analysisSection;
            if (firm.analysis) {
                analysisSection = firm.analysis.split('\n\n').map(p => `<p>${p}</p>`).join('');
            } else {
                analysisSection = `<p class="data-pending">Detailed analysis coming soon.</p>`;
            }

            // Guidance section
            let guidanceSection;
            if (firm.guidance || firm.guidanceBottomLine) {
                guidanceSection = '';
                if (firm.guidance) {
                    guidanceSection += firm.guidance.split('\n\n').map(p => `<p>${p}</p>`).join('');
                }
                if (firm.guidanceBottomLine) {
                    guidanceSection += `<p><strong>${firm.guidanceBottomLine}</strong></p>`;
                }
            } else {
                guidanceSection = `<p class="data-pending">Student guidance coming soon.</p>`;
            }

            // Takeaway
            const takeawaySection = firm.takeaway 
                ? `<p class="quote-intro">"${firm.takeaway}"</p>`
                : '';

            // Stats section - only show if we have data
            const hasStats = firm.ffTransactionCount > 0 || firm.renewableTransactionCount > 0 || 
                            firm.exacerbatingCount > 0 || firm.mitigatingCount > 0 ||
                            firm.ffLobbyingCount > 0 || firm.renewableLobbyingCount > 0;

            const statsSection = hasStats ? `
                <section style="margin: 2rem 0;">
                    <h3 class="section-title">By the Numbers (2020-2024)</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-card-title">Transactions</div>
                            <div class="stat-comparison">
                                <div class="stat-item">
                                    <div class="stat-label">Fossil Fuel</div>
                                    <div class="stat-value fossil">${formatCurrency(firm.ffTransactionValue)}</div>
                                    <div class="stat-subtext">${firm.ffTransactionCount} deals</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-label">Renewable Energy</div>
                                    <div class="stat-value renewable">${formatCurrency(firm.renewableTransactionValue)}</div>
                                    <div class="stat-subtext">${firm.renewableTransactionCount} deals</div>
                                </div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card-title">Litigation Points</div>
                            <div class="stat-comparison">
                                <div class="stat-item">
                                    <div class="stat-label">Exacerbating</div>
                                    <div class="stat-value fossil">${firm.exacerbatingPoints}</div>
                                    <div class="stat-subtext">${firm.exacerbatingCount} representations</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-label">Mitigating</div>
                                    <div class="stat-value renewable">${firm.mitigatingPoints}</div>
                                    <div class="stat-subtext">${firm.mitigatingCount} representations</div>
                                </div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card-title">Lobbying Compensation</div>
                            <div class="stat-comparison">
                                <div class="stat-item">
                                    <div class="stat-label">Fossil Fuel</div>
                                    <div class="stat-value fossil">${formatCurrency(firm.ffLobbyingValue)}</div>
                                    <div class="stat-subtext">${firm.ffLobbyingCount} clients</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-label">Renewable Energy</div>
                                    <div class="stat-value renewable">${formatCurrency(firm.renewableLobbyingValue)}</div>
                                    <div class="stat-subtext">${firm.renewableLobbyingCount} clients</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            ` : `
                <section style="margin: 2rem 0;">
                    <h3 class="section-title">By the Numbers (2020-2024)</h3>
                    <p class="data-pending">Detailed statistics coming soon.</p>
                </section>
            `;

            container.innerHTML = `
                <div class="profile-header">
                    <div class="profile-main">
                        <h2 class="firm-name">
                            ${firm.name}
                            <span class="vault-rank">Vault #${firm.rank}</span>
                        </h2>
                        <div class="grade-display">
                            <div class="main-grade">
                                <span class="main-grade-label">Climate Grade</span>
                                <span class="main-grade-value" style="background: ${gradeColor};">${firm.grade || '?'}</span>
                            </div>
                            <div class="sub-grades">
                                <div class="sub-grade">
                                    <span class="sub-grade-label">Transactions</span>
                                    <span class="sub-grade-value" style="color: ${transactionColor};">${firm.transaction || '?'}</span>
                                </div>
                                <div class="sub-grade">
                                    <span class="sub-grade-label">Litigation</span>
                                    <span class="sub-grade-value" style="color: ${litigationColor};">${firm.litigation || '?'}</span>
                                </div>
                                <div class="sub-grade">
                                    <span class="sub-grade-label">Lobbying</span>
                                    <span class="sub-grade-value" style="color: ${lobbyingColor};">${firm.lobbying || '?'}</span>
                                </div>
                            </div>
                        </div>
                        ${takeawaySection}
                    </div>
                    <aside class="profile-sidebar">
                        <h3 class="sidebar-title">Firm Facts</h3>
                        <div class="sidebar-item">
                            <span class="sidebar-label">Vault Rank</span>
                            <span class="sidebar-value">#${firm.rank}</span>
                        </div>
                        <div class="sidebar-item">
                            <span class="sidebar-label">Climate Grade</span>
                            <span class="sidebar-value" style="color: ${gradeColor};">${firm.grade || '?'}</span>
                        </div>
                        ${firm.priorGrade ? `
                        <div class="sidebar-item">
                            <span class="sidebar-label">Grade Trajectory</span>
                            <span class="sidebar-value">
                                <span style="color: ${priorGradeColor}">${firm.priorGrade}</span>
                                <span ${trajectoryClass}>${trajectoryArrow}</span>
                                <span style="color: ${gradeColor}">${firm.grade}</span>
                            </span>
                        </div>
                        ` : ''}
                        <div class="sidebar-item">
                            <span class="sidebar-label">Engagement</span>
                            <span class="engagement-badge ${firm.engagementStatus === 'Submitted Statement' ? 'submitted' : 'no-response'}">${firm.engagementStatus || 'No Response'}</span>
                        </div>
                        ${firm.transactionRank ? `
                        <div class="sidebar-item">
                            <span class="sidebar-label">Transaction Rank</span>
                            <span class="sidebar-value">#${firm.transactionRank}${firm.transactionRankDesc ? ' (' + firm.transactionRankDesc + ')' : ''}</span>
                        </div>
                        ` : ''}
                        ${firm.litigationRank ? `
                        <div class="sidebar-item">
                            <span class="sidebar-label">Litigation Rank</span>
                            <span class="sidebar-value">#${firm.litigationRank}${firm.litigationRankDesc ? ' (' + firm.litigationRankDesc + ')' : ''}</span>
                        </div>
                        ` : ''}
                    </aside>
                </div>

                ${activityFlag}

                ${statsSection}

                <section class="content-section">
                    <h3 class="section-title">Firm Statement</h3>
                    ${firmStatementSection}
                </section>

                <section class="content-section">
                    <h3 class="section-title">LSCA Analysis</h3>
                    ${analysisSection}
                </section>

                <section class="content-section student-guidance">
                    <h3 class="guidance-title">
                        <span class="guidance-icon">${guidanceIcon}</span>
                        If You're Considering This Firm
                    </h3>
                    ${guidanceSection}
                </section>
            `;
        }

        function renderNotFound(slug) {
            const container = document.getElementById('profileContainer');
            container.innerHTML = `
                <div class="not-found">
                    <h1>Firm Not Found</h1>
                    <p>We couldn't find a profile for "${slug}". This firm may not be in the Vault 100 or the profile hasn't been created yet.</p>
                    <p><a href="/" style="color: var(--lsca-green);">‚Üê Back to all firms</a></p>
                </div>
            `;
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', loadFirmData);
    </script>
</body>
</html>
